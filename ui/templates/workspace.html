{% extends "base.html" %}

{% block title %}Workflow Studio - {{ project_name }}{% endblock %}

{% block styles %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/workspace_scenario.css') }}">
{% endblock %}

{% block content %}
<div class="scenario-wrapper">
    {% include 'components/sidebar.html' %}

    <main class="scenario-main">
        <!-- ========== MANAGER/ADMIN VIEW ========== -->
        {% if current_user.role in ['manager', 'admin'] %}

        <section class="workspace-collections">
            <div class="collection-block">
                <div class="collection-head">
                    <div>
                        <p class="launch-eyebrow">Business Management</p>
                        <h3>Operations Dashboard</h3>
                    </div>
                </div>
                <div class="collection-grid">
                    <button type="button" class="collection-card"
                        onclick="location.href='{{ url_for('create_user_account') }}'">
                        <div class="collection-icon gradient-blue"><i class="fas fa-users"></i></div>
                        <div class="collection-body">
                            <h4>Manage Employees</h4>
                            <p>Create and manage staff accounts.</p>
                        </div>
                        <span class="collection-cta">Open page</span>
                    </button>
                    <button type="button" class="collection-card" onclick="location.href='{{ url_for('sale_page') }}'">
                        <div class="collection-icon gradient-green"><i class="fas fa-cash-register"></i></div>
                        <div class="collection-body">
                            <h4>Point of Sale</h4>
                            <p>Sell products, manage cart and checkout.</p>
                        </div>
                        <span class="collection-cta">Open page</span>
                    </button>
                    <button type="button" class="collection-card" onclick="location.href='{{ url_for('products') }}'">
                        <div class="collection-icon gradient-orange"><i class="fas fa-box"></i></div>
                        <div class="collection-body">
                            <h4>Products</h4>
                            <p>Manage catalog, inventory and real-time pricing.</p>
                        </div>
                        <span class="collection-cta">Open page</span>
                    </button>
                    <button type="button" class="collection-card" onclick="location.href='{{ url_for('imports') }}'">
                        <div class="collection-icon gradient-blue"><i class="fas fa-download"></i></div>
                        <div class="collection-body">
                            <h4>Imports</h4>
                            <p>Record incoming shipments, suppliers and cost updates.</p>
                        </div>
                        <span class="collection-cta">Open page</span>
                    </button>
                    <button type="button" class="collection-card" onclick="location.href='{{ url_for('exports') }}'">
                        <div class="collection-icon gradient-green"><i class="fas fa-upload"></i></div>
                        <div class="collection-body">
                            <h4>Exports</h4>
                            <p>Track outgoing orders, search transactions and support buyers/sellers.</p>
                        </div>
                        <span class="collection-cta">Open page</span>
                    </button>
                </div>
            </div>

            <div class="collection-block">
                <div class="collection-head">
                    <div>
                        <p class="launch-eyebrow">Intelligent Automation</p>
                        <h3>Scenario &amp; AI Automation</h3>
                    </div>
                </div>
                <div class="collection-grid">
                    <button type="button" class="collection-card"
                        onclick="location.href='{{ url_for('se_auto_import') }}'">
                        <div class="collection-icon gradient-gold"><i class="fas fa-sync-alt"></i></div>
                        <div class="collection-body">
                            <h4>Auto Import</h4>
                            <p>Use bots to automatically reorder when inventory is low and sync stock.</p>
                        </div>
                        <span class="collection-cta">Open page</span>
                    </button>
                    <button type="button" class="collection-card"
                        onclick="location.href='{{ url_for('workspace_builder') }}'">
                        <div class="collection-icon gradient-indigo"><i class="fas fa-diagram-project"></i></div>
                        <div class="collection-body">
                            <h4>Workflow Builder</h4>
                            <p>Drag-and-drop automation scenarios and save drafts.</p>
                        </div>
                        <span class="collection-cta"><i class="fas fa-tools"></i> Go to builder</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Sections removed as per redesign request -->

        <!-- ========== USER VIEW (Limited) ========== -->
        {% else %}

        <section class="workspace-collections">
            <div class="collection-block">
                <div class="collection-head">
                    <div>
                        <p class="launch-eyebrow">Business Management</p>
                        <h3>Operations Dashboard</h3>
                    </div>
                </div>
                <div class="collection-grid">
                    <button type="button" class="collection-card" onclick="location.href='{{ url_for('products') }}'">
                        <div class="collection-icon gradient-orange"><i class="fas fa-box"></i></div>
                        <div class="collection-body">
                            <h4>Products</h4>
                            <p>Manage catalog, inventory and real-time pricing.</p>
                        </div>
                        <span class="collection-cta">Open page</span>
                    </button>
                    <button type="button" class="collection-card" onclick="location.href='{{ url_for('imports') }}'">
                        <div class="collection-icon gradient-blue"><i class="fas fa-download"></i></div>
                        <div class="collection-body">
                            <h4>Imports</h4>
                            <p>Record incoming shipments, suppliers and cost updates.</p>
                        </div>
                        <span class="collection-cta">Open page</span>
                    </button>
                    <button type="button" class="collection-card" onclick="location.href='{{ url_for('exports') }}'">
                        <div class="collection-icon gradient-green"><i class="fas fa-upload"></i></div>
                        <div class="collection-body">
                            <h4>Exports</h4>
                            <p>Track outgoing orders, search transactions and support buyers/sellers.</p>
                        </div>
                        <span class="collection-cta">Open page</span>
                    </button>
                </div>
            </div>

            <div class="collection-block">
                <div class="collection-head">
                    <div>
                        <p class="launch-eyebrow">Intelligent Automation</p>
                        <h3>Scenario &amp; AI Automation</h3>
                    </div>
                </div>
                <div class="collection-grid">
                    <button type="button" class="collection-card" onclick="location.href='{{ url_for('scenarios') }}'">
                        <div class="collection-icon gradient-purple"><i class="fas fa-project-diagram"></i></div>
                        <div class="collection-body">
                            <h4>Scenario</h4>
                            <p>Manage and run your automation scenarios.</p>
                        </div>
                        <span class="collection-cta">Open page</span>
                    </button>
                    <button type="button" class="collection-card"
                        onclick="location.href='{{ url_for('workspace_builder') }}'">
                        <div class="collection-icon gradient-indigo"><i class="fas fa-tools"></i></div>
                        <div class="collection-body">
                            <h4>Workflow</h4>
                            <p>Build and edit automation workflows.</p>
                        </div>
                        <span class="collection-cta">Open page</span>
                    </button>
                    <button type="button" class="collection-card"
                        onclick="location.href='{{ url_for('se_auto_import') }}'">
                        <div class="collection-icon gradient-gold"><i class="fas fa-sync-alt"></i></div>
                        <div class="collection-body">
                            <h4>Auto Import</h4>
                            <p>Use bots to automatically reorder when inventory is low and sync stock.</p>
                        </div>
                        <span class="collection-cta">Open page</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- ========== EMPLOYEE VIEW ========== -->
        <section class="workspace-collections">
            <div class="collection-block">
                <div class="collection-head">
                    <div>
                        <p class="launch-eyebrow">Staff Access</p>
                        <h3>Employee Dashboard</h3>
                    </div>
                </div>
                <div class="collection-grid">
                    <button type="button" class="collection-card" onclick="location.href='{{ url_for('sale_page') }}'">
                        <div class="collection-icon gradient-green"><i class="fas fa-cash-register"></i></div>
                        <div class="collection-body">
                            <h4>Point of Sale</h4>
                            <p>Sell products, manage cart and checkout.</p>
                        </div>
                        <span class="collection-cta">Open page</span>
                    </button>
                    <!-- Add more employee tools here if needed -->
                </div>
            </div>
        </section>
        {% endif %}

    </main>
</div>

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='js/workspace_scenario.js') }}"></script>
<script>
    function redirectToWallet(hash) {
        let url = '/wallet';
        if (hash) url += hash;
        window.location.href = url;
    }
</script>
{% if current_user.role in ['manager', 'admin'] %}
<script src="{{ url_for('static', filename='js/wallet.js') }}" defer></script>
{% endif %}
{% endblock %}
{% endblock %}